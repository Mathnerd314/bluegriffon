<!DOCTYPE html>
<html><head>
  <link rel="stylesheet" type="text/css" href="resource://app/res/BespinEmbedded.css/">
  <link id="bespin_base" href="resource://app/res/"/>
  <script type="text/javascript" src="resource://app/res/BespinEmbedded.js"></script>
  <style>
   body {
     overflow: hidden;
   }
   table {
     position: absolute;
     top: 0px;
     left: 0px;
     right: 0px;
     bottom: 2px;
     border-collapse: collapse;
   }
   tbody, tr, td, div {
     height: 100%;
   }
   * {
     padding: 0px !important;
     margin: 0px !important;
     border: 0px none !important;
   }
   #editor {
     resize: none;
   }
  </style>
  <script>
    function installBespin(aKeyPressCallback, aTheme) {
      var elt = getEditableElement();
      var settings = {
            syntax: "html",
            settings: {
                        tabstop: 2,
                        fontface: "Courier New, Courier, monospace"
                      }
          };
      if (aTheme)
        settings.settings.theme = aTheme;
      var e = bespin.useBespin("editor", settings);
      postMessage("bespin", "*");

      getEditableElement().addEventListener("keypress", aKeyPressCallback, true);

      return e;
    }
    function getEditableElement() {
      return document.getElementById("editor");
    }
  </script>
</head>
<body>
<table style="width: 100%">
  <tbody>
    <tr>
      <td>
        <div id="editor"></div>
      </td>
    </tr>
  </tbody>
</table>
</body>
</html>
